import org.scalatest.{FlatSpec, Matchers}

class day10Tests extends FlatSpec with Matchers {

  "The first part" should "work for the first example" in {
    val sut = Day10(".#..#\n.....\n#####\n....#\n...##")
    sut.numberOfVisibleAsteorids(Coordenate(2,2)) shouldBe 7
    sut.calculateBetterSpot() shouldBe (Coordenate(4,3), 8)
  }

  it should "work for the second example" in {
    val sut = Day10("......#.#.\n#..#.#....\n..#######.\n.#.#.###..\n.#..#.....\n..#....#.#\n#..#....#.\n.##.#..###\n##...#..#.\n.#....####")
    sut.calculateBetterSpot() shouldBe (Coordenate(8,5), 33)
  }

  it should "work for the input" in {
    val sut = Day10(".#..#..##.#...###.#............#.\n.....#..........##..#..#####.#..#\n#....#...#..#.......#...........#\n.#....#....#....#.#...#.#.#.#....\n..#..#.....#.......###.#.#.##....\n...#.##.###..#....#........#..#.#\n..#.##..#.#.#...##..........#...#\n..#..#.......................#..#\n...#..#.#...##.#...#.#..#.#......\n......#......#.....#.............\n.###..#.#..#...#..#.#.......##..#\n.#...#.................###......#\n#.#.......#..####.#..##.###.....#\n.#.#..#.#...##.#.#..#..##.#.#.#..\n##...#....#...#....##....#.#....#\n......#..#......#.#.....##..#.#..\n##.###.....#.#.###.#..#..#..###..\n#...........#.#..#..#..#....#....\n..........#.#.#..#.###...#.....#.\n...#.###........##..#..##........\n.###.....#.#.###...##.........#..\n#.#...##.....#.#.........#..#.###\n..##..##........#........#......#\n..####......#...#..........#.#...\n......##...##.#........#...##.##.\n.#..###...#.......#........#....#\n...##...#..#...#..#..#.#.#...#...\n....#......#.#............##.....\n#......####...#.....#...#......#.\n...#............#...#..#.#.#..#.#\n.#...#....###.####....#.#........\n#.#...##...#.##...#....#.#..##.#.\n.#....#.###..#..##.#.##...#.#..##")
    sut.calculateBetterSpot() shouldBe (Coordenate(29,23), 263)
  }

  "The second part" should "work for the first example" in {
    val sut = Day10(".#..#\n.....\n#####\n....#\n...##")
    sut.calculateBetterSpot() shouldBe (Coordenate(4,3), 8)
    sut.vaporizedAsteroidsInOrderSimpler().head shouldBe Coordenate(2, 3)
  }

  it should "work for the second example" in {
    val sut = Day10(".#....#####...#..\n##...##.#####..##\n##...#...#.#####.\n..#.....#...###..\n..#.#.....#....##")
    sut.vaporizedAsteroidsInOrderSimpler().head shouldBe Coordenate(1, 8)
  }

  it should "work for the big example" in {
    val sut = Day10(".#..##.###...#######\n##.############..##.\n.#.######.########.#\n.###.#######.####.#.\n#####.##.#.##.###.##\n..#####..#.#########\n####################\n#.####....###.#.#.##\n##.#################\n#####.##.###..####..\n..######..##.#######\n####.##.####...##..#\n.#####..#.######.###\n##...#.##########...\n#.##########.#######\n.####.#.###.###.#.##\n....##.##.###..#####\n.#.#.###########.###\n#.#.#.#####.####.###\n###.##.####.##.#..##")
    sut.calculateBetterSpot() shouldBe (Coordenate(13,11), 210)
    val vaporized = sut.vaporizedAsteroidsInOrderSimpler()
    vaporized.head shouldBe Coordenate(12, 11)
    vaporized(200) shouldBe Coordenate(2, 8)
  }

  it should "work for the input" in {
    val sut = Day10(".#..#..##.#...###.#............#.\n.....#..........##..#..#####.#..#\n#....#...#..#.......#...........#\n.#....#....#....#.#...#.#.#.#....\n..#..#.....#.......###.#.#.##....\n...#.##.###..#....#........#..#.#\n..#.##..#.#.#...##..........#...#\n..#..#.......................#..#\n...#..#.#...##.#...#.#..#.#......\n......#......#.....#.............\n.###..#.#..#...#..#.#.......##..#\n.#...#.................###......#\n#.#.......#..####.#..##.###.....#\n.#.#..#.#...##.#.#..#..##.#.#.#..\n##...#....#...#....##....#.#....#\n......#..#......#.#.....##..#.#..\n##.###.....#.#.###.#..#..#..###..\n#...........#.#..#..#..#....#....\n..........#.#.#..#.###...#.....#.\n...#.###........##..#..##........\n.###.....#.#.###...##.........#..\n#.#...##.....#.#.........#..#.###\n..##..##........#........#......#\n..####......#...#..........#.#...\n......##...##.#........#...##.##.\n.#..###...#.......#........#....#\n...##...#..#...#..#..#.#.#...#...\n....#......#.#............##.....\n#......####...#.....#...#......#.\n...#............#...#..#.#.#..#.#\n.#...#....###.####....#.#........\n#.#...##...#.##...#....#.#..##.#.\n.#....#.###..#..##.#.##...#.#..##")

    val vaporized = sut.vaporizedAsteroidsInOrderSimpler()
    vaporized(200) shouldBe Coordenate(10, 11)
  }
}
